'use strict';(function(){function q(a){if("undefined"===typeof a||!a.classList.contains("disabled")){var d=n.getHeatMap().getMapInformation().name;a=document.getElementById("column_dendro_canvas");var c=document.getElementById("row_dendro_canvas"),b=document.createElement("a"),e=new Image,h=new Image,r=new Image;m(a,200,50,b,function(a){e.onload=function(){m(c,50,200,b,function(a){h.onload=function(){m(p.canvas,200,200,b,function(a){r.onload=function(){z(e,h,r,200,200,b,function(a){b.setAttribute("href",
a.toDataURL("image/png"));b.setAttribute("download",d+"_tn.png");document.body.appendChild(b);b.click();b.remove()})};r.src=a.toDataURL("image/png")})};h.src=a.toDataURL("image/png")})};e.src=a.toDataURL("image/png")})}}function z(a,d,c,b,e,h,r){var k=document.createElement("canvas"),v=k.getContext("2d");v.imageSmoothingEnabled=!1;var l=n.getHeatMap(),g=l.getRowDendroConfig().show;l=l.getColDendroConfig().show;l="NONE"===l||"NA"===l?!1:!0;g="NONE"===g||"NA"===g?!1:!0;var f=b,m=e,t=!1===l?0:e/4,u=
!1===g?0:b/4;k.width=b+u;k.height=e+t;var p=0,q=0;!0===l?(v.drawImage(a,u,0,b,t),q=t):m+=t;!0===g?(v.drawImage(d,0,t,u,e),p=u):f+=u;v.drawImage(c,p,q,f,m);r(k,h)}function m(a,d,c,b,f){var h=new Image;a=a.toDataURL("image/png");10>a.length?UHM.systemMessage("Download Thumbnail Warning","The Summary Pane must be open and visible in the NG-CHM Viewer in order to download a thumbnail image of the heat map."):(h.onload=function(){var a=document.createElement("canvas"),k=a.getContext("2d");k.imageSmoothingQuality=
"high";k.mozImageSmoothingEnabled=!1;k.imageSmoothingEnabled=!1;a.width=2*d;a.height=2*c;k.drawImage(h,0,0,2*d,2*c);var e=new Image;e.onload=function(){var a=document.createElement("canvas"),g=a.getContext("2d");g.imageSmoothingQuality="high";g.mozImageSmoothingEnabled=!1;g.imageSmoothingEnabled=!1;a.width=d;a.height=c;g.drawImage(e,0,0,d,c);f(a,b)};e.src=a.toDataURL("image/png")},h.src=a)}NgChm.markFile();const y={downloadSummaryPng:q,downloadSummaryMapPng:function(){var a=n.getHeatMap().getMapInformation().name,
d=p.canvas.toDataURL("image/png"),c=document.createElement("a");m(d,200,200,c,function(b){c.setAttribute("href",b.toDataURL("image/png"));c.setAttribute("download",a+"_tnMap.png");document.body.appendChild(c);c.click();c.remove()})},editWidget:function(a){a=a||[];-1!==a.indexOf("noheader")&&document.getElementById("mdaServiceHeader").classList.add("hide");-1!==a.indexOf("nopanelheaders")&&(w.showPaneHeader=!1);-1!==a.indexOf("nodetailview")&&(f.showDetailPane=!1,document.getElementById("summary_box_canvas").classList.add("hide"));
-1!==a.indexOf("showSummaryCovariateLabels")&&(p.flagDrawClassBarLabels=!0);-1!==a.indexOf("noBuilderUploads")&&(A.enableBuilderUploads=!1);-1!==a.indexOf("requireFocus")&&f.setKeyData("require-focus",!0)},hideEmbed:function(a){var d=window.frameElement;d.className="ngchmThumbnail";var c=document.getElementById("NGCHMEmbedWrapper"),b=document.getElementById("NGCHMEmbed");"undefined"===typeof a?(d.style.height=f.embedThumbHeight,c.style.height=f.embedThumbHeight,b.style.height=f.embedThumbHeight):
(d.style=a,c.style=a,b.style=a);a=document.getElementById("NGCHMEmbedCollapse");b.style.display="none";a.style.display="none";c.style.display=""},loadAllTilesTimer:function(){var a=n.getHeatMap();a=a.getNumRows(x.DETAIL_LEVEL)+a.getNumColumns(x.DETAIL_LEVEL);return 1E3>=a?500:2E3>=a?1E3:3E3>=a?2E3:4E3>=a?3E3:5E3>=a?4E3:6E3>=a?5E3:1E4},heatMapLoaded:function(){return null!==n.getHeatMap()},getSummaryHist:function(a){const d=n.getHeatMap();return d.getSummaryHist(d.getCurrentDL(),+a[0],+a[a.length-
1])},getLinkoutTypes:function(){return new Promise(a=>{NgChm.CUST.waitForPlugins(()=>{a(NgChm.CUST.linkoutTypes.slice(0))})})}};NgChm.createNS("NgChm.API",y);const f=NgChm.importNS("NgChm.UTIL"),x=NgChm.importNS("NgChm.MAPREP"),n=NgChm.importNS("NgChm.MMGR"),p=NgChm.importNS("NgChm.SUM"),w=NgChm.importNS("NgChm.Pane");NgChm.importNS("NgChm.DEV");const B=NgChm.importNS("NgChm.PDF"),A=NgChm.importNS("NgChm.LNK");NgChm.exportToNS("NgChm.API",{b64toBlob:f.b64toBlob,jsPDF:(...a)=>jspdf.jsPDF.apply(null,
a),generatePDF:B.openPdfPrefs,chmResize:()=>w.resizeNGCHM()});Object.assign(f,y);document.getElementById("menuPng").onclick=function(a){q(a.target)}})();
'use strict';NgChm.importNS("NgChm.UI-Manager").onLoadCHM();
